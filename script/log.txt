
C:\Users\user\Repos\simpledl\script>REM Delete previously created NAT network 

C:\Users\user\Repos\simpledl\script>VBoxManage dhcpserver remove --netname k8snetwork 

C:\Users\user\Repos\simpledl\script>VBoxManage natnetwork remove --netname k8snetwork 

C:\Users\user\Repos\simpledl\script>for /L %i in (1 1 3) do (VBoxManage unregistervm ubuntu-%i --delete ) 

C:\Users\user\Repos\simpledl\script>(VBoxManage unregistervm ubuntu-1 --delete ) 
0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%

C:\Users\user\Repos\simpledl\script>(VBoxManage unregistervm ubuntu-2 --delete ) 
0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%

C:\Users\user\Repos\simpledl\script>(VBoxManage unregistervm ubuntu-3 --delete ) 
0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%

C:\Users\user\Repos\simpledl\script>REM Create NAT network 

C:\Users\user\Repos\simpledl\script>VBoxManage natnetwork add --netname k8snetwork --network "10.0.2.0/24" --enable --dhcp on 

C:\Users\user\Repos\simpledl\script>VBoxManage dhcpserver add --netname k8snetwork --ip "10.0.2.1" --netmask "255.255.255.0" --lowerip "10.0.2.2" --upperip "10.0.2.254" --enable 

C:\Users\user\Repos\simpledl\script>for /L %i in (1 1 3) do (
REM Create VM  
 VBoxManage createvm --name ubuntu-%i --register --ostype Ubuntu_64  
 REM Set VM memory and CPU  
 VBoxManage modifyvm ubuntu-%i --memory 4096 --cpus 2  
 REM Create a virtual hard disk  
 VBoxManage createmedium disk --filename "C:\Users\user\VirtualBox VMs\ubuntu-%i\ubuntu-%i.vdi" --size 50000  
 REM Add SATA controller and attach the disk  
 VBoxManage storagectl ubuntu-%i --name "SATA Controller" --add sata --controller IntelAhci  
 VBoxManage storageattach ubuntu-%i --storagectl "SATA Controller" --port 0 --device 0 --type hdd --medium "C:\Users\user\VirtualBox VMs\ubuntu-%i\ubuntu-%i.vdi"  
 REM First, you need to add an IDE controller to the VM:  
 VBoxManage storagectl ubuntu-%i --name "IDE Controller" --add ide  
 REM Then, you can attach the ISO file to the IDE controller:  
 VBoxManage storageattach ubuntu-%i --storagectl "IDE Controller" --port 0 --device 0 --type dvddrive --medium "C:\Users\user\Downloads\ISO\ubuntu-24.04-live-server-amd64.iso"  
 REM Attach a NAT network to a VM  
 VBoxManage modifyvm ubuntu-%i --nic1 natnetwork --nat-network1 k8snetwork 
) 

C:\Users\user\Repos\simpledl\script>(
REM Create VM  
 VBoxManage createvm --name ubuntu-1 --register --ostype Ubuntu_64  
 REM Set VM memory and CPU  
 VBoxManage modifyvm ubuntu-1 --memory 4096 --cpus 2  
 REM Create a virtual hard disk  
 VBoxManage createmedium disk --filename "C:\Users\user\VirtualBox VMs\ubuntu-1\ubuntu-1.vdi" --size 50000  
 REM Add SATA controller and attach the disk  
 VBoxManage storagectl ubuntu-1 --name "SATA Controller" --add sata --controller IntelAhci  
 VBoxManage storageattach ubuntu-1 --storagectl "SATA Controller" --port 0 --device 0 --type hdd --medium "C:\Users\user\VirtualBox VMs\ubuntu-1\ubuntu-1.vdi"  
 REM First, you need to add an IDE controller to the VM:  
 VBoxManage storagectl ubuntu-1 --name "IDE Controller" --add ide  
 REM Then, you can attach the ISO file to the IDE controller:  
 VBoxManage storageattach ubuntu-1 --storagectl "IDE Controller" --port 0 --device 0 --type dvddrive --medium "C:\Users\user\Downloads\ISO\ubuntu-24.04-live-server-amd64.iso"  
 REM Attach a NAT network to a VM  
 VBoxManage modifyvm ubuntu-1 --nic1 natnetwork --nat-network1 k8snetwork 
) 
Virtual machine 'ubuntu-1' is created and registered.
UUID: e4e7776a-2fcd-4fe6-bbe0-3f9305de1d72
Settings file: 'C:\Users\user\VirtualBox VMs\ubuntu-1\ubuntu-1.vbox'
0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
Medium created. UUID: 27c2b736-b4b2-4494-91cc-ec7997e494b4

C:\Users\user\Repos\simpledl\script>(
REM Create VM  
 VBoxManage createvm --name ubuntu-2 --register --ostype Ubuntu_64  
 REM Set VM memory and CPU  
 VBoxManage modifyvm ubuntu-2 --memory 4096 --cpus 2  
 REM Create a virtual hard disk  
 VBoxManage createmedium disk --filename "C:\Users\user\VirtualBox VMs\ubuntu-2\ubuntu-2.vdi" --size 50000  
 REM Add SATA controller and attach the disk  
 VBoxManage storagectl ubuntu-2 --name "SATA Controller" --add sata --controller IntelAhci  
 VBoxManage storageattach ubuntu-2 --storagectl "SATA Controller" --port 0 --device 0 --type hdd --medium "C:\Users\user\VirtualBox VMs\ubuntu-2\ubuntu-2.vdi"  
 REM First, you need to add an IDE controller to the VM:  
 VBoxManage storagectl ubuntu-2 --name "IDE Controller" --add ide  
 REM Then, you can attach the ISO file to the IDE controller:  
 VBoxManage storageattach ubuntu-2 --storagectl "IDE Controller" --port 0 --device 0 --type dvddrive --medium "C:\Users\user\Downloads\ISO\ubuntu-24.04-live-server-amd64.iso"  
 REM Attach a NAT network to a VM  
 VBoxManage modifyvm ubuntu-2 --nic1 natnetwork --nat-network1 k8snetwork 
) 
Virtual machine 'ubuntu-2' is created and registered.
UUID: 80aeb982-20f1-4a2e-9974-fce362068a6e
Settings file: 'C:\Users\user\VirtualBox VMs\ubuntu-2\ubuntu-2.vbox'
0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
Medium created. UUID: a298f8f1-794c-4960-9772-0cac4232f553

C:\Users\user\Repos\simpledl\script>(
REM Create VM  
 VBoxManage createvm --name ubuntu-3 --register --ostype Ubuntu_64  
 REM Set VM memory and CPU  
 VBoxManage modifyvm ubuntu-3 --memory 4096 --cpus 2  
 REM Create a virtual hard disk  
 VBoxManage createmedium disk --filename "C:\Users\user\VirtualBox VMs\ubuntu-3\ubuntu-3.vdi" --size 50000  
 REM Add SATA controller and attach the disk  
 VBoxManage storagectl ubuntu-3 --name "SATA Controller" --add sata --controller IntelAhci  
 VBoxManage storageattach ubuntu-3 --storagectl "SATA Controller" --port 0 --device 0 --type hdd --medium "C:\Users\user\VirtualBox VMs\ubuntu-3\ubuntu-3.vdi"  
 REM First, you need to add an IDE controller to the VM:  
 VBoxManage storagectl ubuntu-3 --name "IDE Controller" --add ide  
 REM Then, you can attach the ISO file to the IDE controller:  
 VBoxManage storageattach ubuntu-3 --storagectl "IDE Controller" --port 0 --device 0 --type dvddrive --medium "C:\Users\user\Downloads\ISO\ubuntu-24.04-live-server-amd64.iso"  
 REM Attach a NAT network to a VM  
 VBoxManage modifyvm ubuntu-3 --nic1 natnetwork --nat-network1 k8snetwork 
) 
Virtual machine 'ubuntu-3' is created and registered.
UUID: 60be55ac-207c-4c0b-8391-5194def0e5fe
Settings file: 'C:\Users\user\VirtualBox VMs\ubuntu-3\ubuntu-3.vbox'
0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
Medium created. UUID: 6b99e5c3-5f2b-4056-a85b-39193d52ebac

C:\Users\user\Repos\simpledl\script>REM Set up port forwarding rules 

C:\Users\user\Repos\simpledl\script>VBoxManage natnetwork modify --netname k8snetwork --port-forward-4 "Rule 1:tcp:[127.0.0.1]:22021:[10.0.2.2]:22" 

C:\Users\user\Repos\simpledl\script>VBoxManage natnetwork modify --netname k8snetwork --port-forward-4 "Rule 2:tcp:[127.0.0.1]:22022:[10.0.2.3]:22" 

C:\Users\user\Repos\simpledl\script>VBoxManage natnetwork modify --netname k8snetwork --port-forward-4 "Rule 3:tcp:[127.0.0.1]:22023:[10.0.2.4]:22" 
