
C:\Users\user\Repos\simpledl\script>REM Delete previously created NAT network 

C:\Users\user\Repos\simpledl\script>VBoxManage dhcpserver remove --netname k8snetwork 
VBoxManage.exe: error: Failed to find DHCP server for network 'k8snetwork'

C:\Users\user\Repos\simpledl\script>VBoxManage natnetwork remove --netname k8snetwork 
VBoxManage.exe: error: NATNetwork server does not exist

C:\Users\user\Repos\simpledl\script>for /L %i in (1 1 3) do (VBoxManage unregistervm ubuntu-%i --delete ) 

C:\Users\user\Repos\simpledl\script>(VBoxManage unregistervm ubuntu-1 --delete ) 
VBoxManage.exe: error: Could not find a registered machine named 'ubuntu-1'
VBoxManage.exe: error: Details: code VBOX_E_OBJECT_NOT_FOUND (0x80bb0001), component VirtualBoxWrap, interface IVirtualBox, callee IUnknown
VBoxManage.exe: error: Context: "FindMachine(Bstr(VMName).raw(), machine.asOutParam())" at line 231 of file VBoxManageMisc.cpp

C:\Users\user\Repos\simpledl\script>(VBoxManage unregistervm ubuntu-2 --delete ) 
VBoxManage.exe: error: Could not find a registered machine named 'ubuntu-2'
VBoxManage.exe: error: Details: code VBOX_E_OBJECT_NOT_FOUND (0x80bb0001), component VirtualBoxWrap, interface IVirtualBox, callee IUnknown
VBoxManage.exe: error: Context: "FindMachine(Bstr(VMName).raw(), machine.asOutParam())" at line 231 of file VBoxManageMisc.cpp

C:\Users\user\Repos\simpledl\script>(VBoxManage unregistervm ubuntu-3 --delete ) 
VBoxManage.exe: error: Could not find a registered machine named 'ubuntu-3'
VBoxManage.exe: error: Details: code VBOX_E_OBJECT_NOT_FOUND (0x80bb0001), component VirtualBoxWrap, interface IVirtualBox, callee IUnknown
VBoxManage.exe: error: Context: "FindMachine(Bstr(VMName).raw(), machine.asOutParam())" at line 231 of file VBoxManageMisc.cpp

C:\Users\user\Repos\simpledl\script>REM Create NAT network 

C:\Users\user\Repos\simpledl\script>VBoxManage natnetwork add --netname k8snetwork --network "10.0.2.0/24" --enable --dhcp on 

C:\Users\user\Repos\simpledl\script>VBoxManage dhcpserver add --netname k8snetwork --server-ip "10.0.2.2" --netmask "255.255.255.0" --lower-ip "10.0.2.3" --upper-ip "10.0.2.254" --enable 

C:\Users\user\Repos\simpledl\script>vboxmanage dhcpserver restart --network=k8snetwork 
VBoxManage.exe: error: Failed to restart the server
VBoxManage.exe: error: not running
VBoxManage.exe: error: Details: code E_FAIL (0x80004005), component DHCPServerWrap, interface IDHCPServer, callee IUnknown

C:\Users\user\Repos\simpledl\script>for /L %i in (1 1 3) do (
REM Create VM  
 VBoxManage createvm --name ubuntu-%i --register --ostype Ubuntu_64  
 REM Set VM memory and CPU  
 VBoxManage modifyvm ubuntu-%i --memory 4096 --cpus 2  
 REM Create a virtual hard disk  
 VBoxManage createmedium disk --filename "C:\Users\user\VirtualBox VMs\ubuntu-%i\ubuntu-%i.vdi" --size 50000  
 REM Add SATA controller and attach the disk  
 VBoxManage storagectl ubuntu-%i --name "SATA Controller" --add sata --controller IntelAhci  
 VBoxManage storageattach ubuntu-%i --storagectl "SATA Controller" --port 0 --device 0 --type hdd --medium "C:\Users\user\VirtualBox VMs\ubuntu-%i\ubuntu-%i.vdi"  
 REM First, you need to add an IDE controller to the VM:  
 VBoxManage storagectl ubuntu-%i --name "IDE Controller" --add ide  
 REM Then, you can attach the ISO file to the IDE controller:  
 VBoxManage storageattach ubuntu-%i --storagectl "IDE Controller" --port 0 --device 0 --type dvddrive --medium "C:\Users\user\Downloads\ISO\ubuntu-24.04-live-server-amd64.iso"  
 REM Attach a NAT network to a VM  
 VBoxManage modifyvm ubuntu-%i --nic1 natnetwork --nat-network1 k8snetwork 
) 

C:\Users\user\Repos\simpledl\script>(
REM Create VM  
 VBoxManage createvm --name ubuntu-1 --register --ostype Ubuntu_64  
 REM Set VM memory and CPU  
 VBoxManage modifyvm ubuntu-1 --memory 4096 --cpus 2  
 REM Create a virtual hard disk  
 VBoxManage createmedium disk --filename "C:\Users\user\VirtualBox VMs\ubuntu-1\ubuntu-1.vdi" --size 50000  
 REM Add SATA controller and attach the disk  
 VBoxManage storagectl ubuntu-1 --name "SATA Controller" --add sata --controller IntelAhci  
 VBoxManage storageattach ubuntu-1 --storagectl "SATA Controller" --port 0 --device 0 --type hdd --medium "C:\Users\user\VirtualBox VMs\ubuntu-1\ubuntu-1.vdi"  
 REM First, you need to add an IDE controller to the VM:  
 VBoxManage storagectl ubuntu-1 --name "IDE Controller" --add ide  
 REM Then, you can attach the ISO file to the IDE controller:  
 VBoxManage storageattach ubuntu-1 --storagectl "IDE Controller" --port 0 --device 0 --type dvddrive --medium "C:\Users\user\Downloads\ISO\ubuntu-24.04-live-server-amd64.iso"  
 REM Attach a NAT network to a VM  
 VBoxManage modifyvm ubuntu-1 --nic1 natnetwork --nat-network1 k8snetwork 
) 
Virtual machine 'ubuntu-1' is created and registered.
UUID: 45fe8cd2-6aec-4b31-a51b-28b1bdfaec59
Settings file: 'C:\Users\user\VirtualBox VMs\ubuntu-1\ubuntu-1.vbox'
0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
Medium created. UUID: 92886ecf-9b6d-4c57-81b0-75ebf72044b4

C:\Users\user\Repos\simpledl\script>(
REM Create VM  
 VBoxManage createvm --name ubuntu-2 --register --ostype Ubuntu_64  
 REM Set VM memory and CPU  
 VBoxManage modifyvm ubuntu-2 --memory 4096 --cpus 2  
 REM Create a virtual hard disk  
 VBoxManage createmedium disk --filename "C:\Users\user\VirtualBox VMs\ubuntu-2\ubuntu-2.vdi" --size 50000  
 REM Add SATA controller and attach the disk  
 VBoxManage storagectl ubuntu-2 --name "SATA Controller" --add sata --controller IntelAhci  
 VBoxManage storageattach ubuntu-2 --storagectl "SATA Controller" --port 0 --device 0 --type hdd --medium "C:\Users\user\VirtualBox VMs\ubuntu-2\ubuntu-2.vdi"  
 REM First, you need to add an IDE controller to the VM:  
 VBoxManage storagectl ubuntu-2 --name "IDE Controller" --add ide  
 REM Then, you can attach the ISO file to the IDE controller:  
 VBoxManage storageattach ubuntu-2 --storagectl "IDE Controller" --port 0 --device 0 --type dvddrive --medium "C:\Users\user\Downloads\ISO\ubuntu-24.04-live-server-amd64.iso"  
 REM Attach a NAT network to a VM  
 VBoxManage modifyvm ubuntu-2 --nic1 natnetwork --nat-network1 k8snetwork 
) 
Virtual machine 'ubuntu-2' is created and registered.
UUID: d075a2ff-617a-40aa-85b5-3486f7ded39e
Settings file: 'C:\Users\user\VirtualBox VMs\ubuntu-2\ubuntu-2.vbox'
0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
Medium created. UUID: 9667f8e2-14c5-4053-928b-709028fe4057

C:\Users\user\Repos\simpledl\script>(
REM Create VM  
 VBoxManage createvm --name ubuntu-3 --register --ostype Ubuntu_64  
 REM Set VM memory and CPU  
 VBoxManage modifyvm ubuntu-3 --memory 4096 --cpus 2  
 REM Create a virtual hard disk  
 VBoxManage createmedium disk --filename "C:\Users\user\VirtualBox VMs\ubuntu-3\ubuntu-3.vdi" --size 50000  
 REM Add SATA controller and attach the disk  
 VBoxManage storagectl ubuntu-3 --name "SATA Controller" --add sata --controller IntelAhci  
 VBoxManage storageattach ubuntu-3 --storagectl "SATA Controller" --port 0 --device 0 --type hdd --medium "C:\Users\user\VirtualBox VMs\ubuntu-3\ubuntu-3.vdi"  
 REM First, you need to add an IDE controller to the VM:  
 VBoxManage storagectl ubuntu-3 --name "IDE Controller" --add ide  
 REM Then, you can attach the ISO file to the IDE controller:  
 VBoxManage storageattach ubuntu-3 --storagectl "IDE Controller" --port 0 --device 0 --type dvddrive --medium "C:\Users\user\Downloads\ISO\ubuntu-24.04-live-server-amd64.iso"  
 REM Attach a NAT network to a VM  
 VBoxManage modifyvm ubuntu-3 --nic1 natnetwork --nat-network1 k8snetwork 
) 
Virtual machine 'ubuntu-3' is created and registered.
UUID: 304983e4-4f8d-4767-a4d9-ccac1a7adfb7
Settings file: 'C:\Users\user\VirtualBox VMs\ubuntu-3\ubuntu-3.vbox'
0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100%
Medium created. UUID: 8feb9471-28bd-41d0-b067-1878cf9e488c

C:\Users\user\Repos\simpledl\script>REM Set up port forwarding rules 

C:\Users\user\Repos\simpledl\script>VBoxManage natnetwork modify --netname k8snetwork --port-forward-4 "Rule 1:tcp:[127.0.0.1]:22021:[10.0.2.2]:22" 

C:\Users\user\Repos\simpledl\script>VBoxManage natnetwork modify --netname k8snetwork --port-forward-4 "Rule 2:tcp:[127.0.0.1]:22022:[10.0.2.3]:22" 

C:\Users\user\Repos\simpledl\script>VBoxManage natnetwork modify --netname k8snetwork --port-forward-4 "Rule 3:tcp:[127.0.0.1]:22023:[10.0.2.4]:22" 
